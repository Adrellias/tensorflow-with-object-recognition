FROM armindocachada/tensorflow-raspberrypi

RUN mkdir -p /data/videos/incoming
#RUN chmod u+x  /etc/init.d/intruder_detection_service

    
COPY security_camera_object_detection.ipynb /tensorflow/models/research/object_detection/
RUN jupyter nbconvert --to script /tensorflow/models/research/object_detection/security_camera_object_detection.ipynb
COPY scripts/intruder_detection_service.sh /etc/init.d/intruder_detection_service
COPY config.ini /tensorflow/models/research/object_detection/


COPY python /intruder-detector/
COPY config.ini /intruder-detector





#COPY scripts/dphys-swapfile_original /etc/dphys-swapfile

#RUN service dphys-swapfile restart

WORKDIR /intruder-detector
RUN pip3 install scipy
COPY scripts/start.sh /root/start.sh
ENTRYPOINT ["/root/start.sh"]